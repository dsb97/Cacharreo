<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/window.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="./sidebars.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <style id="dynamicStyle"></style>
    <script>

        var windowPath = new URLSearchParams(window.location.search).get('path');
        var windowID = new URLSearchParams(window.location.search).get('id');
        var parentWindow = window.parent.document.getElementById(windowID);
        var windowTitle = parentWindow.getElementsByTagName('div')[3];
        var backButton = parentWindow.getElementsByClassName('backButton')[0];
        var forwardButton = parentWindow.getElementsByClassName('forwardButton')[0];
        var refreshButton = parentWindow.getElementsByClassName('refreshButton')[0];
        var stopButton = parentWindow.getElementsByClassName('stopButton')[0];
        var homeButton = parentWindow.getElementsByClassName('homeButton')[0];
        backButton.onclick = () => back();
        forwardButton.onclick = () => forward();
        refreshButton.onclick = () => refresh();
        stopButton.onclick = () => stop();
        homeButton.onclick = () => home();
    </script>
</head>

<body>
    <div class="row h-100">
        <div class="col-5 col-lg-3 h-100">
            <div class="sidebar scrollable overflow-auto rounded" style="max-width: 100%; max-height: 100%;">
                <ul class="list-unstyled ps-0">
                    <li class="mb-1 px-2 pt-2">

                        <div class="collapse show" id="home-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li class="mb-3">
                                    <a onclick=""
                                        class="link-dark rounded ps-1 ms-0 w-100 d-flex justify-content-between align-items-center">
                                        <img class="me-2" style="height: 65pt; width: 65pt;"
                                            src="/resources/userpic.png" alt="" srcset="">
                                        <label>
                                            <h5>David Sánchez Barragán</h5>
                                            Cuenta local
                                        </label>
                                    </a>

                                </li>
                                <li>
                                    <input placeholder="&#xF002; Buscar..." class="form-control mb-2" type="text"
                                        name="searchBar" id="searchBar">
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-0 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsDpi.png" alt="">
                                        <p class="pt-2 mb-0">Pantalla</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsBattery.png" alt="">
                                        <p class="pt-2 mb-0">Energía</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsThemes.png" alt="">
                                        <p class="pt-2 mb-0">Iconos</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsWindowsColor.png" alt="">
                                        <p class="pt-2 mb-0">Color de ventanas</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsBackground.png" alt="">
                                        <p class="pt-2 mb-0">Fondo de pantalla</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsLanguage.png" alt="">
                                        <p class="pt-2 mb-0">Idioma</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsInfo.png" alt="">
                                        <p class="pt-2 mb-0">Acerca de...</p>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="" class="link-dark rounded ps-1 ms-0 w-100">
                                        <img class="me-2" width="30" height="30"
                                            src="/resources/themes/default/system/settingsUpdate.png" alt="">
                                        <p class="pt-2 mb-0">Actualizaciones</p>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-7 col-lg-9 h-100">
            <div class="scrollable rounded defaultWindowColor defaultFontColor"
                style="max-width: 100%; max-height: 100%; overflow-x: hidden;">
                <div class="col-12 rounded mb-5" id="settingsContent">
                    <div class="w-100 p-2 d-flex justify-content-between align-items-center">
                        <label> Color de las ventanas:</label>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="colorMode"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Automático
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="colorMode">
                                <li><a class="dropdown-item">Automático</a></li>
                                <li><a class="dropdown-item">Manual</a></li>
                            </ul>
                        </div>
                    </div>
                    <hr style="margin: 0px; border: 2px solid black;">
                    <div class="w-100 p-2 d-flex flex-column">
                        <label> Paleta de color:</label>
                        <div class="d-flex justify-content-center">
                            <div style="width: 75%;">
                                <div onclick="changeWindowColor('rgb(219,241,254)')"
                                    style="display: inline-block; background-color: rgb(219,241,254); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(112,161,244)')"
                                    style="display: inline-block; background-color: rgb(112,161,244); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(110,254,254)')"
                                    style="display: inline-block; background-color: rgb(110,254,254); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(129,241,114)')"
                                    style="display: inline-block; background-color: rgb(129,241,114); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(203,254,111)')"
                                    style="display: inline-block; background-color: rgb(203,254,111); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(254,254,142)')"
                                    style="display: inline-block; background-color: rgb(254,254,142); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(254,218,98)')"
                                    style="display: inline-block; background-color: rgb(254,218,98); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(254,95,95)')"
                                    style="display: inline-block; background-color: rgb(254,95,95); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(254,130,224)')"
                                    style="display: inline-block; background-color: rgb(254,130,224); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(254,216,254)')"
                                    style="display: inline-block; background-color: rgb(254,216,254); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(189,150,228)')"
                                    style="display: inline-block; background-color: rgb(189,150,228); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(231,211,234)')"
                                    style="display: inline-block; background-color: rgb(231,211,234); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(228,217,183)')"
                                    style="display: inline-block; background-color: rgb(228,217,183); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(182,142,142)')"
                                    style="display: inline-block; background-color: rgb(182,142,142); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(115,115,115)')"
                                    style="display: inline-block; background-color: rgb(115,115,115); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                                <div onclick="changeWindowColor('rgb(243,243,243)')"
                                    style="display: inline-block; background-color: rgb(243,243,243); margin: 10px; max-width: 35pt; min-width: 35pt; width: 35pt; max-height: 35pt; min-height: 35pt; height: 35pt;">
                                </div>
                            </div>
                        </div>

                        <label for="opacityRange" class="form-label"> Opacidad:</label>
                        <div class="d-flex justify-content-center">
                            <div style="width: 75%;">
                                <input onchange="changeOpacity(event)" type="range" class="form-range" min="0" max="100"
                                    step="1" id="opacityRange">
                                <span id="opacityPercentage">80%</label>
                            </div>
                        </div>
                    </div>
                    <hr style="margin: 0px; border: 2px solid black;">
                    <div class="w-100 p-2 d-flex flex-column">

                    </div>
                </div>

            </div>
        </div>
    </div>



    <!-- <script src="js/index.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="/js/shared.js"></script>
    <script type="text/javascript" src="/windows/sidebars.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            //document.getElementById('settingsContent').style.backgroundColor = getSetting(keySettings.windowColor);
            //<i class="bi bi-chevron-right"></i> Color de ventanas
            refresh();
            showWindow(parentWindow);
        });

        function changeWindowColor(windowColor) {
            let rgbaColor = windowColor.replace('rgb(', '').replace('rgba(', '').replace(')', '').split(',');

            if (windowColor.includes('rgba')) {
                setSetting(keySettings.windowColor, windowColor);
                console.log(`setSetting(${keySettings.windowColor}, ${windowColor})`)
            } else {
                setSetting(keySettings.windowColor, windowColor.replace(')', ',0.8)'));
                opacityRange.value = 80;
                opacityPercentage.innerHTML = '80%';
            }
            window.parent.reloadColors();
            reloadColors();
        }

        function changeOpacity(event) {
            let rgbaColor = getSetting(keySettings.windowColor).replace('rgb(', '').replace('rgba(', '').replace(')', '').split(',');
            rgbaColor[3] = event.target.value / 100;
            changeWindowColor(`rgba(${rgbaColor[0]},${rgbaColor[1]},${rgbaColor[2]},${rgbaColor[3]})`);
            opacityPercentage.innerHTML = `${event.target.value}%`;
        }

        function back() {

        }

        function forward() {

        }

        function refresh() {
            backButton.style.display = "none";
            forwardButton.style.display = "none";
            refreshButton.style.display = "none";
            stopButton.style.display = "none";
            homeButton.style.display = "none";
            windowTitle.innerHTML = 'Ajustes';

            let p = parseFloat(getSetting(keySettings.windowColor).replace('rgba(', '').replace('rgb(','').replace(')', '').split(',')[3]) * 100;
            opacityRange.value = p;
            opacityPercentage.innerHTML = `${p}%`;
        }

        function stop() {

        }

        function home() {

        }
    </script>
</body>

</html>